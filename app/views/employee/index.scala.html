@main(){

 	<div class="subnav">
	    <ul class="nav nav-pills">      
	      <li class=""><a href="@routes.EmployeeController.create_new()" id="employee-add">Add</a></li> 
	      <li class="">
	      	<a href="#" link="@routes.EmployeeController.update_get(0L)" id="employee-edit">Edit</a>
	      </li>  
	         
	    </ul>
  	</div>

	<br/>

	<table id="employee-grid"></table> 
	<div id="employee-pager"></div>

	<script type="text/javascript">

	$(function(){
		process_employees();

		$("#employee-edit").click(employee_edit_click);
	});

	var process_employees = function() {		
  		$.ajax({
			url: '/service/employees',
			processData:false,
			type: 'GET',
			beforeSend:function(jqXHR, settings){					
				jqXHR.setRequestHeader("Content-Type", "application/json");					
			},
			success: function(data, textStatus, jqXHR){					
				render_employees(data);	
			},
			error: function(jqXHR, textStatus, errorThrown){				
			},
			complete: function(jqXHR,textStatus){					
			}	
		});
	};

	var render_employees = function(employees) {		
		if(employees == undefined || employees == null){
			return;
		}	

		$("#employee-grid").jqGrid({
			datatype: "local",
		    colNames:['ID','Name','Address','Mobile','Joining Date'],
		    colModel:[
		    	{name:'id',index:'id',sorttype:'number',width:'50px'},
		    	{name:'name',index:'name'},
		    	{name:'address',index:'address'},
		    	{name:'mobile_number',index:'mobile_number'},
		    	{name:'joining_date',index:'joining_date'}
		    ],		    
		    viewrecords: true,
		    multiselect: false,
		    caption: "Employees",		    
		    height: 250,
		    width: 900
		}).navGrid('#employee-pager',{edit:false,add:false,del:false});

		$.each(employees,function(i,employee){
			$("#employee-grid").jqGrid('addRowData',i+1,employee);	
		});
	};

	var employee_edit_click = function(){		
		var id = $("#employee-grid").jqGrid('getGridParam','selrow'); 
		if (id) { 
			var ret = $("#employee-grid").jqGrid('getRowData',id); 			
			var link=$(this).attr("link");
			link=link.replace('0',ret.id);
			$(this).attr('href',link);
		} else { 
			alert("Please select row");
		} 		
	}

	var employee_delete_click = function(){		
		var id = $("#employee-grid").jqGrid('getGridParam','selrow'); 
		if (id) { 
			var ret = jQuery("#employee-grid").jqGrid('getRowData',id); 			 
		} else { 
			alert("Please select row");
		}
	}
	</script>

}	